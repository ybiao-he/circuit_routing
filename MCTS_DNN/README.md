# DNN-MCTS for circuit routing

This is the code for Circuit Routing Using Monte Carlo Tree Search and Deep Learning. It is for running on a single board, which is defined in the file of "paras.txt".

## Requirements

* Python3
* Numpy
* Matplotlib
* Keras

## Running

There are two versions for DNN-MCTS, one is that each search returns an action (in the folder `Return_action_version`), the other one is that each search tree returns routing paths (in the folder `Return_paths_version`). The way to run them are same. 

To run the code, three non-code files are needed: pretrained DNN model (`actor.h5`); test board (`testboard.csv`); parameter setting file (`paras.txt`)

Then write all the parameters in the file [paras.txt](paras.txt) and run by:

```
python3 main.py paras.txt
```

The output file is a csv file storing the paths. The path is stored as a set of node (a tuple with two variables), and the paths of different nets are splitted by (-1, -1). For example, [(1,2),(2,2),(2,3),(-1,-1),(3,6),(3,7),(-1,-1)] can be a returned paths, where (1,2)-->(2,2)-->(2,3) and (3,6)-->(3,7) paths connecting two nets.

Note that if new dnn model and test board needed, then,

1. a pretrained DNN model is in the folder `Policy_Pretrain`. 
If training a new one, first run `python3 GenDataMaze.py path_to_boards` to generate training data, where `path_to_board` is the local path of used boards that can be found [here](https://drive.google.com/drive/folders/1Yb4cVbGWhREXyFVrOLah1KCpkjdvDOEL?usp=sharing), please download and save them locally,
then run `python3 policy_pretrain.py training_data`, where `training_data` is the path of training data generated by the fist step.

2. test board should have same format with file `testboard.csv`
